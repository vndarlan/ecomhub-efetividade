# ====================================
# CONFIGURAÇÕES OBRIGATÓRIAS
# ====================================

# Segurança - API Key para autenticação
# Gere uma chave forte (ex: openssl rand -hex 32)
API_SECRET_KEY=sua-chave-secreta-aqui-minimo-32-caracteres

# Credenciais EcomHub (OBRIGATÓRIO)
ECOMHUB_EMAIL=seu_email@example.com
ECOMHUB_PASSWORD=sua_senha_aqui

# Configurações do Servidor
ENVIRONMENT=local
PORT=8001

# CORS - Origens permitidas (separadas por vírgula)
# Deixe vazio para permitir todas as origens
# Exemplo: https://app1.com,https://app2.com
ALLOWED_ORIGINS=

# ====================================
# CONFIGURAÇÕES DE TOKEN SYNC
# ====================================

# IMPORTANTE: Existem duas formas de sincronizar tokens:
#
# OPÇÃO 1 (RECOMENDADA): n8n External Scheduler
#   - TOKEN_SYNC_ENABLED=false (padrão)
#   - Configure n8n para chamar POST /api/sync-tokens a cada 2 minutos
#   - Defina SYNC_API_KEY abaixo
#   - Benefícios: mais estável, sem sobreposição, melhor monitoring
#
# OPÇÃO 2: Scheduler Interno (APScheduler)
#   - TOKEN_SYNC_ENABLED=true
#   - Roda em thread background
#   - Pode ter problemas se jobs demorarem >2min

# Token Sync - Configurações de Sincronização
TOKEN_SYNC_ENABLED=false  # Recomendado: false (usar n8n external)
TOKEN_DURATION_MINUTES=3   # Tokens EcomHub duram apenas 3 minutos!
SYNC_INTERVAL_MINUTES=2    # Renovar a cada 2 minutos (margem de 1 minuto)

# Token Sync - API Key para n8n (OBRIGATÓRIO para n8n)
# Gere uma chave forte: openssl rand -hex 32
SYNC_API_KEY=sua-chave-sync-api-aqui-minimo-32-caracteres

# Token Sync - Integração com Chegou Hub
CHEGOU_HUB_WEBHOOK_URL=  # URL do webhook do Chegou Hub
CHEGOU_HUB_API_KEY=      # Chave de API do Chegou Hub
CHEGOU_HUB_TIMEOUT=10    # Timeout em segundos

# Token Sync - Configurações Avançadas (Opcional)
MAX_RETRY_ATTEMPTS=3
RETRY_DELAY_SECONDS=5
RETRY_EXPONENTIAL_BACKOFF=true
MAX_CONSECUTIVE_FAILURES=3
VALIDATE_TOKENS_AFTER_FETCH=true
SYNC_ON_STARTUP=true

# Token Sync - Alertas (Opcional)
ALERT_WEBHOOK_URL=  # Webhook para alertas críticos
LOG_LEVEL=INFO
LOG_TO_FILE=true
LOG_FILE_NAME=token_sync.log